/*
* eXo - text editor of awesomeness for Drupal
* by JaceRider and contributors. Available under the MIT license.
* See http://ashenrayne.com for more information
*
* Hallo 1.0.4 - rich text editor for jQuery UI
* by Henri Bergius and contributors. Available under the MIT license.
* See http://hallojs.org for more information
*/
(function(){!function(a){return this.Drupal.behaviors.exo={attach:function(b,c){var d,e,f,g;if(c.exo){f=this,g=[];for(d in c.exo)e=c.exo[d],g.push(a("#"+e.id).once().exo(e));return g}}},a.exo={created:!1,initialized:!1,selectors:{},content:null},a.widget("EXO.exo",{animateIn:"pt-page-moveFromLeft pt-page-delay200",animateOut:"pt-page-rotateLeftSideFirst",animEndEventNames:{WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},options:{id:null,label:null,plugins:{}},_create:function(){var b=this;return a.exo.created?void 0:(a.exo.created=!0,a("html").addClass("exo-exists"),Drupal.behaviors.quickbar&&delete Drupal.behaviors.quickbar,setTimeout(function(){return a("head").append("<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,300italic,700' rel='stylesheet' type='text/css'>"),a("body").wrapInner('<div id="exo-page" class="exo-page" />').wrapInner('<div id="exo-wrapper" />'),b.$exoPage=a.exo.selectors.$exoPage=a("#exo-page"),b.$exoPage.data("originalClassList",b.$exoPage.attr("class")).addClass("exo-page-current"),a("html").addClass("exo-created")},10))},_init:function(){var b;return this.hideTextarea(),b=a('<a class="exo-placeholder" href="#" />'),this.element.after(b),b.html('<span><i class="fa fa-edit"></i> Edit <strong>'+this.options.label+"</strong></span>").click(this.enableClick.bind(this))},enableClick:function(a){return a.preventDefault(),this.enable()},enable:function(){var b,c,d,e;if(/msie|trident/i.test(navigator.userAgent))return c=confirm("Your browser (Internet Explorer) is not support at this time. Please use Firefox, Chrome or Opera when administering content on this site. Would you like to download one of these browsers now?"),c===!0&&(alert("You will now be redirected to a Better Browser..."),window.location("http://abetterbrowser.org/")),void 0;if(a.exo.initialized){e=a.exo.selectors;for(b in e)d=e[b],this[b]=d;return a.exo.selectors.$element=this.element,a.exo.options=this.options,this.activePage(this.$exo,this.animateIn,this.animateOut),a.exo.content=this.element.val(),this.$main[0].contentWindow.jQuery.exoFrame.enable()}return a.exo.initialized=!0,this.initialize()},initialize:function(){var b;return b=a("#exo-wrapper"),this.$loader=a('<div id="exo-loading"><span class="fa-stack fa-2x"><i class="fa fa-square fa-stack-2x"></i><i class="fa fa-cog fa-spin fa-stack-1x fa-inverse"></i></span></div>'),this.$loader.appendTo(b),this.$exo=a.exo.selectors.$exo=a('<div id="exo" class="exo-page" />'),this.$exo.data("originalClassList",this.$exo.attr("class")).appendTo(b),this.$main=a.exo.selectors.$main=a('<iframe id="exo-main" src="/exo/frame"></iframe>'),this.$main.appendTo(this.$exo).wrap('<div id="exo-main-wrapper" />'),this.watch()},watch:function(){var b=this;return this.$frame=a.exo.selectors.$frame=this.$main.contents().find("#exo-content"),this.$frame.length?(clearTimeout(this.watchTimer),delete this.watchTimer,this.$loader.remove(),this.enable()):this.watchTimer=setTimeout(function(){return b.watch()},100)},disable:function(){return this.element.val(a.exo.content),this.activePage(this.$exoPage,this.animateIn,this.animateOut)},activePage:function(b,c,d){var e;return b.hasClass("exo-page")?(e=this.animEndEventNames[Modernizr.prefixed("animation")],this.$exo.on(e,this.activePageFinish.bind(this)),b.addClass("exo-page-current exo-page-ontop exo-focus "+c),a(".exo-page:not(.exo-focus)").addClass(d)):!1},activePageFinish:function(){var b,c,d;return d=this.animEndEventNames[Modernizr.prefixed("animation")],this.$exo.off(d),c=a(".exo-page:not(.exo-focus)"),c.attr("class",c.data("originalClassList")),b=a(".exo-focus"),b.attr("class",b.data("originalClassList")+" exo-page-current")},hideTextarea:function(){return this.element.hide()}})}(jQuery)}).call(this);